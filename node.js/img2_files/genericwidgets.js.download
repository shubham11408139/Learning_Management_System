_hasAccessibilityChanged=false;var cebBrandingDTO={backgroundColor:"#C9C3C3",headerColor:"#F2F3F4",isDefault:true,menuColor:"#F6F6F6",primaryColor:"#00aeef",secondaryColor:"#95e1da"};var openGenericWidgetModal=function(){$("#generic_widgets_modal").modal({keyboard:true,show:true})},closeGenericWidgetModal=function(){$("#generic_widgets_modal").modal("hide")};EventManager.registerEventHandlers("changeTheme","PlayerAccessibilityWidget",function(a,b){if(a&&a.context){changeTheme(a)}});EventManager.registerEventHandlers("changeTheme","HeaderWidget",function(a,b){if(a&&a.context){$(".allowKeyboardAccess").attr("checked",false);$(a.currentTarget).prop("checked",true);if(readCookie("THEME")==null){if(a.currentTarget.value=="default"){return}}else{if(readCookie("THEME")==a.currentTarget.value){return}}changeTheme(a);var c={};if(a.currentTarget.value=="off-white-black"){c.themeName="off-white-black";c.backgroundColor="#FFFFE6";c.foregroundColor="#000"}if(a.currentTarget.value=="blue-yellow"){c.themeName="blue-yellow";c.backgroundColor="#0c23fb";c.foregroundColor="#f1d700"}if(a.currentTarget.value=="black-white"){c.themeName="black-white";c.backgroundColor="#000";c.foregroundColor="#fff"}if(a.currentTarget.value=="default"){c.themeName="default";c.backgroundColor="rgb(52,52,52)";c.foregroundColor="rgb(127,209,60)"}sessionStorage.setItem("accessibilityTheme",JSON.stringify(c))}});function themeChanger(a,b){if(a.theme=="off-white-black"){b._setOption("backgroundColor","#FFFFE6");b._setOption("foregroundColor","#000000")}if(a.theme=="blue-yellow"){b._setOption("backgroundColor","#0c23fb");b._setOption("foregroundColor","#f1d700")}if(a.theme=="black-white"){b._setOption("backgroundColor","#000000");b._setOption("foregroundColor","#ffffff")}if(a.theme=="default"){b._setOption("backgroundColor","rgb(52,52,52)");b._setOption("foregroundColor","rgb(127,209,60)")}}var syncThemeRadio=function(){var a=setInterval(function(){var c=readCookie("THEME")==null?"default":readCookie("THEME");var b=$("input.allowKeyboardAccess",$("[widget-name=HeaderWidget]")).filter(function(){return $(this).prop("checked")==true}).val();if(b==c){console.log(b,"Theme matched: ");clearInterval(a)}$("input.allowKeyboardAccess",$("[widget-name=HeaderWidget]")).prop("checked",false);$("input[value="+c+"]",$("[widget-name=HeaderWidget]")).prop("checked",true)},500)};var changeTheme=function(a){$("body").cebDrawer({message:app.getLocalizedText("genericwidget.applyStyleEverywhere","Do you want to apply this style everywhere? After you click apply we will load the style in the background."),mode:"confirm",type:"info",acceptButtonLabel:app.getLocalizedText("genericwidget.apply","Apply"),denyButtonLabel:app.getLocalizedText("genericwidget.dontApply","Don't Apply"),onAccept:function(t,b){_hasAccessibilityChanged=true;var r={theme:$(a.currentTarget).val()};var c=$(".answer-selected");if($(".apta-ansleast-panel").length&&$(".apta-ansmost-panel").length){$(".apta-ansleast-panel, .apta-ansmost-panel").removeAttr("style")}for(var f=0;f<c.length;f++){var m=c[f];if($(m).find(".least-selected").length){$(m).find(".least-selected").next().css("border-left",$(".answer-selected").find(".apta-ansmost-panel").css("border-left").replace("1","0"))}if($(m).find(".most-selected").length){$(m).find(".most-selected").prev().css("border-right",$(".answer-selected").find(".apta-ansleast-panel").css("border-left").replace("1","0"))}}var s="";var q=$("<div/>");var l=$(".themeCSS");var n=$("<link/>");var e="";var p="";switch(r.theme){case"default":if(custom_theme!=""&&custom_theme!="{}"){var d=custom_theme.replaceAll("{","").replaceAll("}","").split(",");for(var j=0;j<d.length;j++){var h=d[j].split("=");if($.trim(h[0])=="player"){var o=theme_by_url.split("resources")[0];s=o+$.trim(h[1])}}}else{s=default_theme_url}break;case"black-white":s=theme_bw_url;break;case"blue-yellow":s=theme_by_url;break;case"off-white-black":s=theme_owb_url;break}var g={theme:r.theme};AjaxRequest.send(changeThemeControllerURL,"POST",null,null,g,null,null,null);q.load(s,function(){n.attr("type","text/css").attr("class","themeCSS").attr("rel","stylesheet").attr("href",s);var i=l.data("_timeout");if(i){clearTimeout(i)}l.last().after(n);var k=setTimeout(function(){l.remove();if($("html").attr("dir")=="rtl"){prepare_css_for_rtl()}var w=$("canvas.CEB_Timer_Canvas");var A="";for(var x=0;x<w.length;x++){var v=w.eq(x);A=v.closest(".CEB_Timer").data("cebTimerV2")?v.closest(".CEB_Timer").data("cebTimerV2"):v.closest(".CEB_Timer").data("cebTimer");if(typeof A!="undefined"){var z=$(".allowKeyboardAccess");for(var u=0;u<z.length;u++){var y=z[u];if(y.value===r.theme){$(y).prop("checked",true)}else{$(y).removeAttr("checked")}}}themeChanger(r,A)}$(window).trigger("resize")},1500);n.data("_timeout",k)});setTimeout(function(){$(".accessibilityFocus").focus()},2500);if($("._MUTILCHOICEMOBILE_body").length&&$("._wbinfo").length){EventManager.raiseEvent("OnThemeChanged","TestDriverWidget",r)}},onDeny:function(b,c){setTimeout(function(){$(".accessibilityFocus").focus()},2500)}})};EventManager.registerEventHandlers("changeLanguage","PlayerLanguageWidget",function(c,e){if(c&&c.currentTarget){var a=c.currentTarget.id;var b=location.href+"?lang="+a;var d={locale:a};var f=AjaxRequest.send(updatecandidatelanguage_url,"post",null,null,d,null,null,null);f.success(function(g){});window.location=b}});EventManager.registerEventHandlers("saveUserDetail","CandidateDetailsWidget",function(b,d){if(b&&b.context){var a=b.context;b.widgetinstance.validateAll();var c=function(){var j=$("#j_currentPassword",$(b.widgetinstance.target)).val(),g=$(".j_password",$(b.widgetinstance.target)).val(),h=$("#j_confirm",$(b.widgetinstance.target)).val(),i=$(".confirm",$(b.widgetinstance.target)).parent().find("label.error"),f=$("#j_currentPassword",$(b.widgetinstance.target)).parent().find("label.error");if(g!=h){i.removeClass("hidden");return true}else{i.addClass("hidden");if(g!=""){if(j!=""&&j!=null){f.addClass("hidden");return false}else{f.removeClass("hidden");return true}}else{return false}}};if(!b.widgetinstance.hasErrored&&!c()){if(a.createdDate){a.createdDate=(a.createdDate.indexOf("/Date(")!=-1)?CEBWidget.prototype.convertDateForServer(a.createdDate):a.createdDate}if(a.updatedDate){a.updatedDate=(a.updatedDate.indexOf("/Date(")!=-1)?CEBWidget.prototype.convertDateForServer(a.updatedDate):a.updatedDate}$.each(a.profiles,function(f,g){if(a.profiles[f].createdDate){a.profiles[f].createdDate=a.profiles[f].createdDate&&(a.profiles[f].createdDate.indexOf("/Date(")!=-1)?CEBWidget.prototype.convertDateForServer(a.profiles[f].createdDate):a.profiles[f].createdDate}if(a.profiles[f].updatedDate){a.profiles[f].updatedDate=a.profiles[f].updatedDate&&(a.profiles[f].updatedDate.indexOf("/Date(")!=-1)?CEBWidget.prototype.convertDateForServer(a.profiles[f].updatedDate):a.profiles[f].updatedDate}});a.companySettings.infoBlockStartDate=(a.companySettings.infoBlockStartDate.indexOf("/Date(")!=-1)?CEBWidget.prototype.convertDateForServer(a.companySettings.infoBlockStartDate):a.companySettings.infoBlockStartDate;var e=AjaxRequest.send(saveCandidateDetailUrl,"post",null,null,a,null,null,null);e.success(function(f){if(!f.IsError){$("body").cebDrawer({message:app.getLocalizedText("genericwidget.changesSaved","Changes saved successfully."),mode:"alert",type:"success",buttonLabel:app.getLocalizedText("genericwidget.close","Close"),onButtonClick:function(g,h){closeGenericWidgetModal();CEBWidget.namedInstances.CandidateDetailsWidget.setContext()}})}else{$("body").cebDrawer({message:f.Message,mode:"alert",type:"error",buttonLabel:app.getLocalizedText("genericwidget.close","Close")})}});e.error(function(g){var f=JSON.parse(g.responseText);$("body").cebDrawer({message:f.Message,mode:"alert",type:"error",buttonLabel:app.getLocalizedText("genericwidget.close","Close")})})}}});EventManager.registerEventHandlers("entireNoticeBtn","DpnWidget",function(c,d){var a={expand:{fn:"slideDown",key:"DPNWIDGET.notice.collapse_msg",fallback:"Collapse the entire notice"},collapse:{fn:"slideUp",key:"DPNWIDGET.notice.expand_msg",fallback:"See the entire notice"}},b=$("#expandedView",c.widgetinstance.target),e=b.is(":hidden")?"expand":"collapse";b[a[e].fn]();$(c.currentTarget).text(app.getLocalizedText(a[e].key,a[e].fallback))});EventManager.registerEventHandlers("discardChanges","CandidateDetailsWidget",function(a,b){if(a&&a.context){var c=JSON.parse(a.widgetinstance.state);a.widgetinstance.setContext([c]);closeGenericWidgetModal()}});EventManager.registerEventHandlers("DataBound","PlayerCandidateProgressPage",function(a,c){if(a&&a.bindData){var b=CEBWidget.namedInstances.MobileHeaderWidget;var d=$(".perComplete",b.target);d.text(a.bindData.percentageCompletion+app.getLocalizedText("genericwidget.percentComplete","% Complete"))}});EventManager.registerGlobalEventHandlers("ClosedCaptionToggle",function(f,g){var d=(typeof g.nativeEvent.target!=="undefined")?$(g.nativeEvent.target).is(":checked"):$(f.currentTarget).is(":checked");if(typeof player=="object"){player.caption=d;try{if(typeof sessionStorage!="undefined"){sessionStorage.setItem("_"+testSessionId+"_captions",d)}}catch(g){if(app.debugMode){console.log("Could not store updated captions value in session storage!!!");console.log(g)}}finally{var b=CEBWidget.namedInstances.TestDriverWidgetV2;var a=$("._ringerSubtitlesBase",b.target).outerHeight();if(b&&b.bindData&&typeof b.bindData.testType=="string"&&b.bindData.testType=="CCSIMS"){var c=$("._ccsimsCaptionsContainer",b.target);a=(a>33)?(a-=19):0;if(player.caption){c.show()}else{c.hide()}if(typeof b.ccsimsManageHeight=="function"){b.ccsimsManageHeight(a)}}}}});var loadGenericWidgets=function(b){var a=$("#generic_widgets_modal");var d=CEBWidget.namedInstances.HeaderWidget.bindData||[];a.find("._widgets_container > div").hide();a.find("#custom-content").addClass("hidden");a.find("._widgets_container").removeClass("hidden");var c={accessibility:(d.accessibility)?d.accessibility:"default"};if(b=="PlayerCandidateProgressPage"){if(!app.getWidgetInstanceById("PlayerCandidateProgressPage",$("div[id=candidateProgressContainer]"))){app.loadWidgetByName("PlayerCandidateProgressPage",$("#candidateProgressContainer",$("#generic_widgets_modal")),loadUrl,"datauri="+candidateProgressUrl+",hideNextButton=true&mode=header");$("#candidateProgressContainer").show();$("#candidateProgressContainer").removeAttr("aria-hidden")}else{CEBWidget.namedInstances.PlayerCandidateProgressPage.setContext()}}else{if(b=="CandidateDetailsWidget"){CEBWidget.namedInstances.CandidateDetailsWidget.dataURI=candidateDetailUrl;CEBWidget.namedInstances.CandidateDetailsWidget.setContext();$("#candidateDetailsContainer").removeAttr("aria-hidden")}else{if(b=="PlayerAccessibilityWidget"&&!ifInstanceExist("PlayerAccessibilityWidget")){app.loadWidgetByName("PlayerAccessibilityWidget",$("#PlayerAccessibilityWidget",$("#generic_widgets_modal")),loadUrl,"isClosedCaptionEnabled="+isClosedCaptionEnabled);$("#PlayerAccessibilityWidget").show()}else{if(b=="PlayerLanguageWidget"&&!ifInstanceExist("PlayerLanguageWidget")){app.loadWidgetByName("PlayerLanguageWidget",$("#PlayerLanguageWidget",$("#generic_widgets_modal")),loadUrl);$("#PlayerLanguageWidget").show()}else{if(b=="PlayerJobLocationWidget"&&!ifInstanceExist("PlayerJobLocationWidget")){app.loadWidgetByName("PlayerJobLocationWidget",$("#PlayerJobLocationContainer",$("#generic_widgets_modal")),loadUrl,"hideloader=true");$("#PlayerJobLocationContainer").show();$("#PlayerJobLocationContainer").removeAttr("aria-hidden")}}}}}if(a.find(".cebwidget[widget-name="+b+"]").length){a.find("._widgets_container").find(".cebwidget[widget-name="+b+"]").show();a.find("._widgets_container").find(".cebwidget[widget-name="+b+"]").closest(".player_container").show()}};function ifInstanceExist(a){return CEBWidget.namedInstances[a]}$("body").on("click",".openGenericMenu",function(b){b.preventDefault();var a=$(this).attr("data-widgetName");if(a!=""&&a!=undefined){$("._overlay").trigger("click");loadGenericWidgets(a);openGenericWidgetModal();$("#_menuIcon",$(".cebwidget[widget-name=MobileHeaderWidget]")).removeClass("hidden")}});$("body").on("click",".accessibility_modal",function(a){a.preventDefault();$("._overlay").trigger("click");$("#accessibility_Help_Modal").removeClass("hidden");$("#accessibility_Help_Modal").modal("show")});$("body").on("click",".header-browserCheck",function(a){a.preventDefault();$("._overlay").trigger("click");$("#browser_Support_Modal_start_assessment").removeClass("hidden");$("#browser_Support_Modal_start_assessment").modal("show");$(".browser_support_header_widget").on("shown.bs.modal",function(){modalFocus()});$("#browser_Support_Modal_start_assessment").on("shown.bs.modal",function(){modalFocus()}).on("hide.bs.modal",function(b){$(".desktop-public-header").focus()})});function modalFocus(){var b=$(this).find("[tabindex=0], select, input, textarea, button, a").filter(":visible");var a=b.first();var c=b.last();a.focus();c.on("keydown",function(d){if((d.which===9&&!d.shiftKey)){d.preventDefault();a.focus()}});a.on("keydown",function(d){if((d.which===9&&d.shiftKey)){d.preventDefault();c.focus()}})}$(".cebwidget[widget-name=MobileHeaderWidget]").on("click","#_goBack",function(){closeGenericWidgetModal();$(this).addClass("hidden");$("#_menuIcon",$(".cebwidget[widget-name=MobileHeaderWidget]")).removeClass("hidden")});