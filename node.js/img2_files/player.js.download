/*!
 * Main Javascript for Player workflow support
 */
if(!("player" in window)){window.player={}}var getURI={next:player.getNextItemURI,save:player.getSaveItemURI,branchLogin:player.getNextItemURI,loginView:player.getLoginViewURI,endWorkflow:player.endWorkflowURI};player.registerEvent=function(a,b){EventManager.registerEventHandlers(a,b,function(c,f){if(a==="endWorkflow"&&b==="PlayerNextStepsWidget"){var h=CEBWidget.namedInstances[b];if(h.userConfirmDone){h.userConfirmDone=false}else{$("body").cebDrawer({message:app.getLocalizedText("player.nextstep.notforme.confirm","You are about to leave this job application. Are you sure you want to exit?"),mode:"confirm",type:"info",denyButtonLabel:app.getLocalizedText("player.cancel","CANCEL"),acceptButtonLabel:app.getLocalizedText("player.ok","OK"),onAccept:function(i,j){h.userConfirmDone=true;EventManager.raiseEvent(a,b,c)}});return}}if(c.widgetinstance.shouldValidate==true&&a=="save"){var h=CEBWidget.namedInstances[b];h.validateAll();if(h.hasErrored){return}}if(a=="next"&&b=="SignInPageWidget"){var h=CEBWidget.namedInstances[b];c.context=h.bindData;if($(c.currentTarget).data("action")=="signup"){c.context.email=$("#signup").find("#j_useremail").val()}if($(c.currentTarget).data("action")!="signin"&&(h.bindData.password!=h.bindData.confirmPassword||h.bindData.countryCode==undefined||h.bindData.countryCode=="Please Select")){return false}}var g=c.context||{};var d=$(c.currentTarget);if(typeof c.widgetinstance.getPayload==="function"){g=c.widgetinstance.getPayload(c.context,a,c)}d.prop("disabled",true);if((a==="next"||a==="branchLogin")&&typeof c.context.jobLocations!="undefined"&&typeof CEBWidget.namedInstances.LandingPageWidgetCE!="undefined"){if(!location_Validation(c,d)){return}}var e=AjaxRequest.send(getURI[a],"post",null,null,g,null,null,null);e.success(function(o){if(o.IsError){var m=o.Message;if(m=="signpage.invalid.emailpassword"){m=app.getLocalizedText("signpage.invalid.emailpassword","Invalid Email or Password")}if(m=="CANDIDATE_ALREADY_EXISTS"){m=app.getLocalizedText("CANDIDATE_ALREADY_EXISTS","Candidate already exists. Please sign in using existing credentials.")}if(m=="signpage.deadline.passed"){m=app.getLocalizedText("signpage.deadline.passed","The deadline date for applying has passed.")}$("body").cebDrawer({message:app.getLocalizedText(m,m),mode:"alert",type:"error",buttonLabel:app.getLocalizedText("player.ok","OK"),})}else{if(a==="save"&&o.Data.endItem&&o.Data.triggerNext){EventManager.raiseEvent("next",b,c)}if(a==="next"||a==="endWorkflow"){if(o.Data.redirect){sessionStorage.setItem("redirected",o.Data.redirect)}if(b=="PlayerSolutionFeedbackWidget"||b=="StaticSolutionFeedbackWidget"){if(!CEBWidget.namedInstances[b].chartRender){var j='<div class="panel panel-default"><div class="panel-body calculatingScores"> '+app.getLocalizedText("solutionfeedback.score.feedback","Your score feedback is still processing. Are you sure you want to continue?")+' </div><div class = "panel-footer" style = "overflow:hidden"></div></div>';var k=$("#generic_widgets_modal");var l=$("#custom-content",k);var i=$("<button />").addClass("btn btn-secondary pull-right").text(app.getLocalizedText("cebconfirmboxplugin.cancel","Cancel"));var p=$("<button />").addClass("btn btn-primary pull-right margin-right-10").text(app.getLocalizedText("common.continue","Continue"));p.on("click",function(q){location.href=o.Data.redirect?o.Data.viewName:"/"+o.Data.viewName});i.on("click",function(q){k.modal("hide");d.prop("disabled",false)});k.unbind("hidden.bs.modal").bind("hidden.bs.modal",function(){d.prop("disabled",false)});k.find("._widgets_container").hide();l.html(j).removeClass("hidden");l.find(".panel-footer").append(i).append(p);k.modal()}else{location.href=o.Data.redirect?o.Data.viewName:"/"+o.Data.viewName}}else{location.href=o.Data.redirect?o.Data.viewName:"/"+o.Data.viewName}}if(a==="branchLogin"){location.href=getURI.loginView}}});e.complete(function(i){if(isPreview){location.href=player.getNextItemURI}else{if(i&&i.responseJSON){d.prop("disabled",!i.responseJSON.IsError)}else{if(i&&i.status==0){d.prop("disabled",i.status)}}}});e.error(function(j){if(j&&j.responseJSON&&j.responseJSON.IsError&&!isPreview){var i=j.responseJSON.Message;if(i=="LINK_ALREADY_USE"){i=app.getLocalizedText("LINK_ALREADY_USE"," Link is associated to a different email account. Please use the correct credentials.")}$("body").cebDrawer({message:i,mode:"alert",type:"error",buttonLabel:app.getLocalizedText("player.ok","OK"),})}});f.handled=false})};player.showSignOutDrawer=function(){$("body").cebDrawer({message:app.getLocalizedText("player.logout.message","You are logged out successfully."),mode:"alert",type:"info",buttonLabel:app.getLocalizedText("player.ok","OK"),})};player.disableHeaderLinks=function(){$("nav[role=navigation] a").removeAttr("data-widgetname").attr("href","javascript:void(0)");$("#language-dropdown").hide();$("nav[role=navigation] ul._accessibilityMenu").empty();$("ul.nav:not(.nav-tabs) a").removeClass("openGenericMenu").removeAttr("href");$("div[widget-name=MobileHeaderWidget] a").removeAttr("href")};app.queryString.hasOwnProperty("logoutsuccess")&&setTimeout(player.showSignOutDrawer,2000);$(function(){$(".close-generic-modal-handle").on("keydown",function(a){if(a.keyCode==13){$(this).trigger("click")}});$(".modal").on("shown.bs.modal",function(){var b=$(this).find("[tabindex=0], select, input, textarea, button, a").filter(":visible");var a=b.first();var c=b.last();a.focus();c.on("keydown",function(d){if((d.which===9&&!d.shiftKey)){d.preventDefault();a.focus()}});a.on("keydown",function(d){if((d.which===9&&d.shiftKey)){d.preventDefault();c.focus()}})})});EventManager.registerEventHandlers("localeUpdated","HeaderWidget",function(c,e){var a=$(c.currentTarget).val();var b=location.href+"?lang="+a;var d={locale:a};var f=AjaxRequest.send(updatecandidatelanguage_url,"post",null,null,d,null,null,null);f.success(function(g){window.location=b});f.error(function(g){console.log("Error")})});function preventBGFocused(){$(".modal").on("shown.bs.modal",function(){var b=$(this).find("[tabindex=0], select, input, textarea, button, a").filter(":visible");var a=b.first();var c=b.last();a.focus();c.on("keydown",function(d){if((d.which===9&&!d.shiftKey)){d.preventDefault();a.focus()}});a.on("keydown",function(d){if((d.which===9&&d.shiftKey)){d.preventDefault();c.focus()}})})}function timer(){if(typeof sessionTimeOutTime=="undefined"){return}var b=sessionTimeOutTime-0;var a=4*60;if(b<=0){b=a}$(document).off("click","#dailog_timer .close").on("click","#dailog_timer .close",function(d){$("#dailog_timer").modal("hide");if(typeof prevUrl=="string"&&prevUrl.indexOf("/survey")>0){c(30*60*1000)}else{c(b*1000)}});$(document).off("click","#dialog_end .next").on("click","#dialog_end .next",function(d){$("#dialog_end").modal("hide");window.location.href=logout_url});function c(d){if(window.sessionTimeoutCountdown){clearInterval(window.sessionTimeoutCountdown)}if(window.sessionTimeout){clearTimeout(window.sessionTimeout)}$("#dailog_timer").modal("hide");$("#dialog_end").modal("hide");window.sessionTimeout=setTimeout(function(){$("#dialog_end").modal("show")},d)}if(readCookie("SesTokCE")!=null){showInactivityTimeout="true"}if(typeof(showInactivityTimeout)!="undefined"&&showInactivityTimeout=="true"){if(typeof prevUrl=="string"&&prevUrl.indexOf("/survey")>0){c(30*60*1000)}else{c(b*1000)}}}function getSessionDetails(){var c={},b=function(){var f=navigator.userAgent.indexOf("Trident/7")!=-1||navigator.userAgent.indexOf("MSIE")!=-1,e=navigator.userAgent.indexOf("Windows NT 6.3")!=-1,d=false;if(f&&!e){d=true}return d},a=function(){var d=function(){return this.name=this.name||function(){var j=navigator?navigator.userAgent.toLowerCase():"other";if(j.indexOf("chrome")>-1){return"chrome"}else{if(j.indexOf("safari")>-1){return"safari"}else{if(j.indexOf("msie")>-1){return"ie"}else{if(j.indexOf("firefox")>-1){return"firefox"}}}}return j}()};var i=function(j){try{return new ActiveXObject(j)}catch(k){}};var f=function(j){for(key in navigator.plugins){var k=navigator.plugins[key];if(k.name==j){return k}}};var g=function(){return this.plugin=this.plugin||function(){if(d()=="ie"){return i("AcroPDF.PDF")||i("PDF.PdfCtrl")}else{return f("Adobe Acrobat")||f("Chrome PDF Viewer")||f("WebKit built-in PDF")}}()};var h=function(){return !!g()};var e=function(){try{var l=g();if(d()=="ie"){var j=l.GetVersions().split(",");var k=j[0].split("=");return parseFloat(k[1])}if(l.version){return parseInt(l.version)}return l.name}catch(m){return null}};return{browser:d(),acrobat:h()?true:false,acrobatVersion:e()}};if(session){c.osName=session.browser.os;c.browserType=session.browser.browser;c.screenResolution=session.device.screen.width+" x "+session.device.screen.height;c.browserType=session.browser.browser;c.browserDate=session.current_session.start;c.browserVersion=navigator.sayswho;c.isSessionCookieEnabled=true;c.timeOffSet=session.time.tz_offset;c.deviceType=app.getCurrentDeviceType();c.isFlashAvailable=session.plugins.flash;c.isJavaEnabled=session.plugins.java;c.isAuthorwareAvailable=b();c.isAdobeAcrobatAvailable=a().acrobat}return c}function fnsession(){var a=(function(g,i,b){var d=0.4;var k={use_html5_location:false,ipinfodb_key:false,gapi_location:true,location_cookie:"location",location_cookie_timeout:5,session_timeout:32,session_cookie:"first_session",get_object:null,set_object:null};var h=function(){g.session=g.session||{};g.session.contains=function(v){if(typeof(v)==="string"){return(this.indexOf(v)!==-1)}for(var w=0;w<v.length;w++){if(this.indexOf(v[w])!==-1){return true}}return false};if(g.session&&g.session.options){for(var s in g.session.options){k[s]=g.session.options[s]}}var l={api_version:d,locale:c.locale(),current_session:c.session(),original_session:c.session(k.session_cookie,k.session_timeout*24*60*60*1000),browser:c.browser(),plugins:c.plugins(),time:c.time(),device:c.device()};if(k.use_html5_location){l.location=c.html5_location()}else{if(k.ipinfodb_key){l.location=c.ipinfodb_location(k.ipinfodb_key)}else{if(k.gapi_location){l.location=c.gapi_location()}}}if(g.session&&g.session.start){var o=g.session.start}var t=0,q,u,p=function(v){if(v){t--}if(t===0){if(o){o(g.session)}}};g.session={};for(var m in l){q=l[m];if(typeof q==="function"){try{q(function(v){g.session[m]=v;p(true)});t++}catch(r){if(g.console&&typeof(console.log)==="function"){console.log(r);p(true)}}}else{g.session[m]=q}}p()};var f={detect:function(){var l={browser:this.search(this.data.browser),version:this.search(b.userAgent)||this.search(b.appVersion),os:this.search(this.data.os)};if(l.os=="Linux"){var o=["CentOS","Debian","Fedora","Gentoo","Mandriva","Mageia","Red Hat","Slackware","SUSE","Turbolinux","Ubuntu"];for(var m=0;m<o.length;m++){if(b.userAgent.toLowerCase().match(o[m].toLowerCase())){l.distro=o[m];break}}}return l},search:function(q){if(typeof q==="object"){for(var m=0;m<q.length;m++){var o=q[m].string,p=q[m].prop;this.version_string=q[m].versionSearch||q[m].identity;if(o){if(o.indexOf(q[m].subString)!=-1){return q[m].identity}}else{if(p){return q[m].identity}}}}else{var l=q.indexOf(this.version_string);if(l==-1){return}return parseFloat(q.substr(l+this.version_string.length+1))}},data:{browser:[{string:b.userAgent,subString:"Chrome",identity:"Chrome"},{string:b.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:b.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:g.opera,identity:"Opera",versionSearch:"Version"},{string:b.vendor,subString:"iCab",identity:"iCab"},{string:b.vendor,subString:"KDE",identity:"Konqueror"},{string:b.userAgent,subString:"Firefox",identity:"Firefox"},{string:b.vendor,subString:"Camino",identity:"Camino"},{string:b.userAgent,subString:"Netscape",identity:"Netscape"},{string:b.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:b.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:b.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],os:[{string:b.platform,subString:"Win",identity:"Windows"},{string:b.platform,subString:"Mac",identity:"Mac"},{string:b.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:b.userAgent,subString:"iPad",identity:"iPad"},{string:b.userAgent,subString:"Android",identity:"Android"},{string:b.platform,subString:"Linux",identity:"Linux"}]}};var c={browser:function(){return f.detect()},time:function(){var m=new Date(),l=new Date();m.setMonth(0);m.setDate(1);l.setMonth(6);l.setDate(1);return({tz_offset:-(new Date().getTimezoneOffset())/60,observes_dst:(m.getTimezoneOffset()!==l.getTimezoneOffset())})},locale:function(){var l=((b.language||b.browserLanguage||b.systemLanguage||b.userLanguage)||"").split("-");if(l.length==2){return{country:l[1].toLowerCase(),lang:l[0].toLowerCase()}}else{if(l){return{lang:l[0].toLowerCase(),country:null}}else{return{lang:null,country:null}}}},device:function(){var o={screen:{width:g.screen.width,height:g.screen.height}};var m,l;try{m=g.innerWidth||i.documentElement.clientWidth||i.body.clientWidth}catch(p){m=0}try{l=g.innerHeight||i.documentElement.clientHeight||i.body.clientHeight}catch(p){l=0}o.viewport={width:m,height:l};o.is_tablet=!!b.userAgent.match(/(iPad|SCH-I800|xoom|kindle)/i);o.is_phone=!o.is_tablet&&!!b.userAgent.match(/(iPhone|iPod|blackberry|android 0.5|htc|lg|midp|mmp|mobile|nokia|opera mini|palm|pocket|psp|sgh|smartphone|symbian|treo mini|Playstation Portable|SonyEricsson|Samsung|MobileExplorer|PalmSource|Benq|Windows Phone|Windows Mobile|IEMobile|Windows CE|Nintendo Wii)/i);o.is_mobile=o.is_tablet||o.is_phone;return o},plugins:function(){var l=function(o){if(b.plugins){var r,p=0,q=b.plugins.length;for(;p<q;p++){r=b.plugins[p];if(r&&r.name&&r.name.toLowerCase().indexOf(o)!==-1){return true}}return false}return false};var m=function(o){var q=true;for(var p=0;p<o.length;p++){try{var s=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"+o[p]),q=!0}catch(r){}if(q){return true}}return false};return{flash:l("flash")||m([".7",".6",""]),silverlight:l("silverlight"),java:l("java"),quicktime:l("quicktime")}},session:function(l,o){var t=e.get_obj(l);if(t==null){t={visits:1,start:new Date().getTime(),last_visit:new Date().getTime(),url:g.location.href,path:g.location.pathname,referrer:i.referrer,referrer_info:e.parse_url(i.referrer),search:{engine:null,query:null}};var p=[{name:"Google",host:"google",query:"q"},{name:"Bing",host:"bing.com",query:"q"},{name:"Yahoo",host:"search.yahoo",query:"p"},{name:"AOL",host:"search.aol",query:"q"},{name:"Ask",host:"ask.com",query:"q"},{name:"Baidu",host:"baidu.com",query:"wd"}],m=p.length,u,s,r=0,v="q query term p wd query text".split(" ");for(r=0;r<m;r++){u=p[r];if(t.referrer_info.host.indexOf(u.host)!==-1){t.search.engine=u.name;t.search.query=t.referrer_info.query[u.query];t.search.terms=t.search.query?t.search.query.split(" "):null;break}}if(t.search.engine===null&&t.referrer_info.search.length>1){for(r=0;r<v.length;r++){var q=t.referrer_info.query[v[r]];if(q){t.search.engine="Unknown";t.search.query=q;t.search.terms=q.split(" ");break}}}}else{t.prev_visit=t.last_visit;t.last_visit=new Date().getTime();t.visits++;t.time_since_last_visit=t.last_visit-t.prev_visit}e.set_obj(l,t,o);return t},html5_location:function(){return function(l){b.geolocation.getCurrentPosition(function(m){m.source="html5";l(m)},function(m){if(k.gapi_location){c.gapi_location()(l)}else{l({error:true,source:"html5"})}})}},gapi_location:function(){return function(m){var l=e.get_obj(k.location_cookie);if(!l||l.source!=="google"){g.gloader_ready=function(){if("google" in g){if(g.google.loader.ClientLocation){g.google.loader.ClientLocation.source="google";m(g.google.loader.ClientLocation)}else{m({error:true,source:"google"})}e.set_obj(k.location_cookie,g.google.loader.ClientLocation,k.location_cookie_timeout*60*60*1000)}};e.embed_script("https://www.google.com/jsapi?callback=gloader_ready")}else{m(l)}}},architecture:function(){var l=n.userAgent.match(/x86_64|Win64|WOW64|x86-64|x64\;|AMD64|amd64/)||(n.cpuClass==="x64")?"x64":"x86";return{arch:l,is_x64:l=="x64",is_x86:l=="x68"}},ipinfodb_location:function(l){return function(o){var m=e.get_obj(k.location_cookie);if(!m&&m.source==="ipinfodb"){g.ipinfocb=function(p){if(p.statusCode==="OK"){p.source="ipinfodb";e.set_obj(k.location_cookie,p,k.location_cookie*60*60*1000);o(p)}else{if(k.gapi_location){return c.gapi_location()(o)}else{o({error:true,source:"ipinfodb",message:p.statusMessage})}}};e.embed_script("http://api.ipinfodb.com/v3/ip-city/?key="+l+"&format=json&callback=ipinfocb")}else{o(m)}}}};var e={parse_url:function(r){var l=i.createElement("a"),q={};l.href=r;var t=l.search.substr(1);if(t!=""){var p=t.split("&"),m=0,o=p.length,s;for(;m<o;m++){s=p[m].split("=");if(s.length===2){q[s[0]]=decodeURI(s[1])}}}return{host:l.host,path:l.pathname,protocol:l.protocol,port:l.port===""?80:l.port,search:l.search,query:q}},set_cookie:function(o,p,l,m){if(!o){return null}if(!m){m={}}if(p===null||p===undefined){l=-1}if(l){m.expires=(new Date().getTime())+l}return(i.cookie=[encodeURIComponent(o),"=",encodeURIComponent(String(p)),m.expires?"; expires="+new Date(m.expires).toUTCString():"","; path="+(m.path?m.path:"/"),m.domain?"; domain="+m.domain:"",(g.location&&g.location.protocol==="https:")?"; secure":""].join(""))},get_cookie:function(m,l){return(l=new RegExp("(?:^|; )"+encodeURIComponent(m)+"=([^;]*)").exec(i.cookie))?decodeURIComponent(l[1]):null},embed_script:function(l){var m=i.createElement("script");m.type="text/javascript";m.src=l;i.getElementsByTagName("body")[0].appendChild(m)},package_obj:function(m){if(m){m.version=d;var l=j.stringify(m);delete m.version;return l}},set_obj:function(o,p,l,m){e.set_cookie(o,e.package_obj(p),l,m)},get_obj:function(o){var m;try{m=j.parse(e.get_cookie(o))}catch(l){}if(m&&m.version==d){delete m.version;return m}}};if(k.get_object!=null){e.get_obj=k.get_object}if(k.set_object!=null){e.set_obj=k.set_object}var j={parse:(g.JSON&&g.JSON.parse)||function(l){if(typeof l!=="string"||!l){return null}return(new Function("return "+l))()},stringify:(g.JSON&&g.JSON.stringify)||function(p){var r=typeof p;if(r!=="object"||p===null){if(r==="string"){return'"'+p+'"'}}else{var o,m,q=[],l=(p&&p.constructor===Array);for(o in p){m=p[o];r=typeof m;if(r==="string"){m='"'+m+'"'}else{if(r==="object"&&m!==null){m=this.stringify(m)}}q.push((l?"":'"'+o+'":')+m)}return(l?"[":"{")+q.join(",")+(l?"]":"}")}}};h()});if(typeof(window.exports)==="undefined"){a(window,document,navigator)}else{window.exports.session=a}}if(true){$(document).ready(function(){function b(){var f=document.cookie.match(/WSessionId=[^;]+/);if(f!=null){if(f instanceof Array){f=f[0].substring(11)}else{f=f.substring(11)}}return f}var a=true,d=b();if(window.sessionStorage.sessionId==undefined||window.sessionStorage.sessionId!=d){window.sessionStorage.sessionId=d;a=false}if(!a){window.sessionStorage.callSend=true;fnsession();AjaxRequest.send(uploadBrowserChecks,"post",null,null,getSessionDetails(),e,c,null);function e(f){}function c(f){}}timer();$(document).on("mousemove touchmove keydown",function(){if(!($("#dailog_timer").is(":visible")||$("#dialog_end").is(":visible"))){timer()}})})}$(window).scroll(function(){if($("._APTA_NAV_BTN_WRAP.in_view").length>0){$(".scrollToTop").css("margin-bottom","73px")}else{if($("._APTA_NAV_BTN_WRAP.in_view").length==0){$(".scrollToTop").css("margin-bottom","33px")}}});player.registerGlobalEvent=function(a,b){var a="next";var e=b.context||{};var c=$(b.currentTarget);if(typeof b.widgetinstance.getPayload==="function"){e=b.widgetinstance.getPayload(b.context,a,b)}c.prop("disabled",true);var d=AjaxRequest.send(getURI[a],"post",null,null,e,null,null,null);d.success(function(g){if(g.IsError){var f=g.Message;$("body").cebDrawer({message:app.getLocalizedText(f,f),mode:"alert",type:"error",buttonLabel:app.getLocalizedText("player.ok","OK"),})}else{if(a==="next"||a==="endWorkflow"){if(g.Data.redirect){sessionStorage.setItem("redirected",g.Data.redirect)}location.href=g.Data.redirect?g.Data.viewName:"/"+g.Data.viewName}}});d.complete(function(f){if(isPreview){location.href=player.getNextItemURI}else{if(f&&f.responseJSON){c.prop("disabled",!f.responseJSON.IsError)}else{if(f&&f.status==0){c.prop("disabled",f.status)}}}});d.error(function(g){if(g&&g.responseJSON&&g.responseJSON.IsError&&!isPreview){var f=g.responseJSON.Message;if(f=="LINK_ALREADY_USE"){f=app.getLocalizedText("LINK_ALREADY_USE"," Link is associated to a different email account. Please use the correct credentials.")}$("body").cebDrawer({message:f,mode:"alert",type:"error",buttonLabel:app.getLocalizedText("player.ok","OK"),})}})};